+----------------+     +--------------------+     +--------------------+     +----------------+
|                |     |                    |     |                    |     |                |
|    User's      |     |    isLoggedIn()    |     |     JWT.verify()   |     |    Protected   |
|    Browser     |     |    (Middleware)    |     |                    |     |    Route       |
|                |     |                    |     |                    |     |    Handler     |
+-------+--------+     +-------+------------+     +-------+------------+     +-------+--------+
        |                      |                      |                      |
        | 1. Request to        |                      |                      |
        |    Protected Route   |                      |                      |
        |    (e.g., /profile)  |                      |                      |
        |--------------------->|                      |                      |
        |                      |                      |                      |
        |                      | 2. Get 'token' Cookie|                      |
        |                      |    (req.cookies.token)|                     |
        |                      |                      |                      |
        |                      | 3. Is token present? |                      |
        |                      |                      |                      |
        |                      |  NO                  |                      |
        |                      |--------------------->| (End Request)        |
        |                      |                      |                      |
        |                      |  YES                 |                      |
        |                      |                      |                      |
        |                      | 4. Verify Token      |                      |
        |                      |--------------------->|                      |
        |                      |                      |                      |
        |                      |<---------------------| 5. Decoded Data      |
        |                      |                      |   (or Error)         |
        |                      |                      |                      |
        |                      | 6. Attach to req.user|                      |
        |                      |                      |                      |
        |                      | 7. Call next()       |                      |
        |                      |--------------------------------------------->| 8. Execute Route |
        |                      |                      |                      |   Logic          |
        |                      |                      |                      |                  |
        |<--------------------------------------------------------------------| 9. Send Response |
        |                      |                      |                      |                  |
